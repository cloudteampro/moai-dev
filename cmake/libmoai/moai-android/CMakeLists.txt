cmake_minimum_required ( VERSION 2.8.11 )
project ( moai-android )

set ( MOAI_ANDROID_MODULES "" )

#import our android module macro
include("./android-module.cmake")

add_subdirectory(moai-android-admob)
add_subdirectory(moai-android-appsflyer)
add_subdirectory(moai-android-facebook)
add_subdirectory(moai-android-firebase)
add_subdirectory(moai-android-google-billing)
add_subdirectory(moai-android-unity-ads)

android_module("moai-android" "" "core")

#dump our modules for the host project

set (DEST "${CMAKE_CURRENT_BINARY_DIR}/moaiandroid.mk")

FILE(WRITE ${DEST} "#generated by moai-android/cmakelists.txt\n\n")

list(REMOVE_ITEM MOAI_ANDROID_MODULES "moai-android")

foreach(MOD IN LISTS MOAI_ANDROID_MODULES )
   FILE(APPEND ${DEST} "include $(CLEAR_VARS)\n\n")
   FILE(APPEND ${DEST} "LOCAL_MODULE := ${MOD}\n")
   FILE(APPEND ${DEST} "LOCAL_SRC_FILES := $(MOAI_LIBS)/lib${MOD}.a\n")
   FILE(APPEND ${DEST} "include $(PREBUILT_STATIC_LIBRARY)\n\n")
endforeach(MOD)

install(FILES ${DEST} DESTINATION ../modules/jni)